(()=>{"use strict";class t{constructor(t,e){this.name=t,this.dueDate=e}setName(t){this.name=t}getName(){return this.name}setDate(t){this.dueDate=t}getDate(){return this.dueDate}}class e{constructor(t){this.name=t,this.tasks=[]}setName(t){this.name=t}getName(){return this.name}setTasks(t){this.tasks=t}getTasks(){return this.tasks}getTask(t){return this.tasks.find((e=>e.getName()===t))}addTask(e,s){this.tasks.push(new t(e,s))}deleteTask(t){this.tasks.splice(t,1)}}class s{constructor(){this.projects=[],this.projects.push(new e("Inbox")),this.projects.push(new e("Today")),this.projects.push(new e("This week"))}setProjects(t){this.projects=t}getProjects(){return this.projects}getProject(t){return this.projects.find((e=>e.getName()===t))}addProject(t){this.projects.push(new e(t))}deleteProject(t){this.projects.splice(t,1)}}class o{constructor(){this.currentProject=-1,this.currentTask=-1}saveTodoList(t){localStorage.setItem("todoList",JSON.stringify(t))}getTodoList(){const o=Object.assign(new s,JSON.parse(localStorage.getItem("todoList")));return o.setProjects(o.getProjects().map((t=>Object.assign(new e,t)))),o.getProjects().forEach((e=>e.setTasks(e.getTasks().map((e=>Object.assign(new t,e)))))),o}addProject(t){const e=this.getTodoList();e.addProject(t),this.saveTodoList(e)}deleteProject(t){const e=this.getTodoList();e.deleteProject(t),this.saveTodoList(e)}addTask(t,e,s){const o=this.getTodoList();o.getProject(t).addTask(e,s),this.saveTodoList(o)}deleteTask(t,e){const s=this.getTodoList();s.getProject(t).deleteTask(e),this.saveTodoList(s)}renameTask(t,e,s){const o=this.getTodoList();o.getProject(t).getTasks()[e].name=s,this.saveTodoList(o)}setTaskDate(t,e,s){const o=this.getTodoList();o.getProject(t).getTasks()[e].dueDate=s,this.saveTodoList(o)}setCurrentProject(t){this.currentProject=t}getCurrentProject(){return this.currentProject}setCurrentTask(t,e){this.currentProject=t,this.currentTask=e}resetCurrentTask(){this.currentTask=-1}getCurrentTask(){return this.currentTask}}(()=>{const t=new o;var e;e=t.getTodoList().getProject("Inbox").getName(),document.querySelector(".project-view").innerHTML=`\n        <div class="top">\n            <h1 class="project-name">${e}</h1>\n        </div>\n        <div class="task-list"></div>\n        <button class="add-task-btn">\n            <i class="fa-solid fa-plus"></i>\n            Add Task\n        </button>\n        <div class="form-div">\n            <form id="task-form" action="">\n                <label for="name">Name</label>\n                <input type="text" id="name" name="taskName" required>\n                <label for="date">Due Date</label>\n                <input type="date" id="date" name="dueDate" required>\n                <div class="form-btns">\n                    <button class="submit-btn" type="submit">Add</button>\n                    <button class="cancel-btn" type="button">Cancel</button>\n                </div>\n            </form>\n        </div>\n        `,t.setCurrentProject(0),console.log(t.getCurrentProject()),console.log(t.getTodoList().getProject("Inbox").getTasks());const s=()=>{const t=document.querySelector(".add-task-btn"),e=document.querySelector(".form-div"),s=document.querySelector(".submit-btn");t.classList.add("active"),e.classList.add("active"),s.textContent="Add"},a=()=>{const t=document.querySelector(".add-task-btn"),e=document.querySelector(".form-div"),s=document.querySelector("#task-form");t.classList.remove("active"),e.classList.remove("active"),s.reset()};(()=>{const e=document.querySelector(".add-task-btn"),o=document.querySelector(".cancel-btn"),r=document.querySelector("#task-form");e.addEventListener("click",s),o.addEventListener("click",a),r.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=document.querySelector(".project-name").textContent,s=document.querySelector("#name").value,o=document.querySelector("#date").value;t.addTask(e,s,o),a()})(),n()}))})();const n=()=>{const e=document.querySelector(".project-name").textContent,s=document.querySelector(".task-list");s.innerHTML="",t.getTodoList().getProject(e).getTasks().forEach(((t,e)=>{s.innerHTML+=`\n                <button class="task" id=${e}>\n                         <i class="fa-solid fa-list-check"></i>\n                         <p class="task-name">${t.name}</p>\n                         <p class="task-date">${t.dueDate}</p>\n                         <i class="fa-solid fa-pen-to-square"></i>\n                         <i class="fa-solid fa-x"></i>\n                 </button>`}))};n()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2pDWSxFQUFXYixTQUFTQyxjQUFjLGNBRXhDSyxFQUFXRyxVQUFVSyxPQUFPLFVBQzVCUCxFQUFRRSxVQUFVSyxPQUFPLFVBQ3pCRCxFQUFTRSxPQUFPLEVBL0JJLE1BQ3BCLE1BQU1ULEVBQWFOLFNBQVNDLGNBQWMsaUJBQ3BDZSxFQUFnQmhCLFNBQVNDLGNBQWMsZUFDdkNZLEVBQVdiLFNBQVNDLGNBQWMsY0FFeENLLEVBQVdXLGlCQUFpQixRQUFTWixHQUNyQ1csRUFBY0MsaUJBQWlCLFFBQVNMLEdBQ3hDQyxFQUFTSSxpQkFBaUIsVUFBV0MsSUFDakNBLEVBQUVDLGlCQTBCUyxNQUNmLE1BQU1yRCxFQUFja0MsU0FBU0MsY0FBYyxpQkFBaUJVLFlBQ3REeEUsRUFBTzZELFNBQVNDLGNBQWMsU0FBU21CLE1BQ3ZDaEUsRUFBTzRDLFNBQVNDLGNBQWMsU0FBU21CLE1BRTdDckIsRUFBUTdDLFFBQVFZLEVBQWEzQixFQUFNaUIsR0FDbkN3RCxHQUFjLEVBL0JWUyxHQUNBQyxHQUFhLEdBQ2YsRUFnQ05DLEdBRUEsTUFBTUQsRUFBYyxLQUNoQixNQUFNeEQsRUFBY2tDLFNBQVNDLGNBQWMsaUJBQWlCVSxZQUN0RGEsRUFBV3hCLFNBQVNDLGNBQWMsY0FDeEN1QixFQUFTdEIsVUFBWSxHQUVyQkgsRUFBUW5CLGNBQWNmLFdBQVdDLEdBQWFqQixXQUFXc0MsU0FBUSxDQUFDbEMsRUFBTU0sS0FDcEVpRSxFQUFTdEIsV0FBYSw2Q0FDUTNDLHNIQUVNTixFQUFLZCwyREFDTGMsRUFBS2IscUtBQU8sR0FJbkQsRUFHTGtGLEdBRUgsRUE5RWlCLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdGFzay5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdG9kb2xpc3QuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3N0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvVUkuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2RlZmF1bHQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFzayB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgZHVlRGF0ZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgIH1cblxuICAgIHNldE5hbWUobmFtZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lXG4gICAgfVxuXG4gICAgZ2V0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZVxuICAgIH1cblxuICAgIHNldERhdGUoZHVlRGF0ZSkge1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlXG4gICAgfVxuXG4gICAgZ2V0RGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHVlRGF0ZVxuICAgIH1cbn1cbiIsImltcG9ydCBUYXNrIGZyb20gXCIuL3Rhc2tcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdCB7XG4gICAgY29uc3RydWN0b3IobmFtZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnRhc2tzID0gW107XG4gICAgfVxuXG4gICAgc2V0TmFtZShuYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWVcbiAgICB9XG5cbiAgICBnZXROYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lXG4gICAgfVxuXG4gICAgc2V0VGFza3ModGFza3MpIHtcbiAgICAgICAgdGhpcy50YXNrcyA9IHRhc2tzXG4gICAgfVxuXG4gICAgZ2V0VGFza3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhc2tzXG4gICAgfVxuXG4gICAgZ2V0VGFzayh0YXNrTmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy50YXNrcy5maW5kKCh0YXNrKSA9PiB0YXNrLmdldE5hbWUoKSA9PT0gdGFza05hbWUpXG4gICAgICB9XG5cbiAgICBhZGRUYXNrKG5ld1Rhc2ssIGRhdGUpIHtcbiAgICAgICAgdGhpcy50YXNrcy5wdXNoKG5ldyBUYXNrKG5ld1Rhc2ssIGRhdGUpKTtcbiAgICB9XG5cbiAgICBkZWxldGVUYXNrKGluZGV4KSB7XG4gICAgICAgIHRoaXMudGFza3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0XCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9kb0xpc3Qge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnByb2plY3RzID0gW11cbiAgICAgICAgdGhpcy5wcm9qZWN0cy5wdXNoKG5ldyBQcm9qZWN0KFwiSW5ib3hcIikpXG4gICAgICAgIHRoaXMucHJvamVjdHMucHVzaChuZXcgUHJvamVjdChcIlRvZGF5XCIpKVxuICAgICAgICB0aGlzLnByb2plY3RzLnB1c2gobmV3IFByb2plY3QoXCJUaGlzIHdlZWtcIikpXG4gICAgfVxuXG4gICAgc2V0UHJvamVjdHMocHJvamVjdHMpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0cyA9IHByb2plY3RzXG4gICAgfVxuXG4gICAgZ2V0UHJvamVjdHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3RzXG4gICAgfVxuXG4gICAgZ2V0UHJvamVjdChwcm9qZWN0TmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9qZWN0cy5maW5kKChwcm9qZWN0KSA9PiBwcm9qZWN0LmdldE5hbWUoKSA9PT0gcHJvamVjdE5hbWUpXG4gICAgfVxuXG4gICAgYWRkUHJvamVjdChuZXdQcm9qZWN0KSB7XG4gICAgICAgIHRoaXMucHJvamVjdHMucHVzaChuZXcgUHJvamVjdChuZXdQcm9qZWN0KSlcbiAgICB9XG5cbiAgICBkZWxldGVQcm9qZWN0KGluZGV4KSB7XG4gICAgICAgIHRoaXMucHJvamVjdHMuc3BsaWNlKGluZGV4LCAxKVxuICAgIH1cbn0iLCJpbXBvcnQgVG9kb0xpc3QgZnJvbSBcIi4vdG9kb2xpc3RcIjtcbmltcG9ydCBQcm9qZWN0IGZyb20gXCIuL3Byb2plY3RcIjtcbmltcG9ydCBUYXNrIGZyb20gXCIuL3Rhc2tcIjtcbmltcG9ydCB7IE5PX1RBU0tfU0VMRUNURUQsIE5PX1BST0pFQ1RfU0VMRUNURUQgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RvcmFnZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFByb2plY3QgPSBOT19QUk9KRUNUX1NFTEVDVEVEXG4gICAgICAgIHRoaXMuY3VycmVudFRhc2sgPSBOT19UQVNLX1NFTEVDVEVEO1xuICAgIH1cblxuICAgIHNhdmVUb2RvTGlzdChkYXRhKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9kb0xpc3RcIiwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gICAgfVxuXG4gICAgZ2V0VG9kb0xpc3QoKSB7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0ID0gT2JqZWN0LmFzc2lnbihuZXcgVG9kb0xpc3QoKSwgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRvZG9MaXN0XCIpKSlcblxuICAgICAgICB0b2RvTGlzdC5zZXRQcm9qZWN0cyh0b2RvTGlzdC5nZXRQcm9qZWN0cygpLm1hcCgocHJvamVjdCkgPT4gT2JqZWN0LmFzc2lnbihuZXcgUHJvamVjdCgpLCBwcm9qZWN0KSlcbiAgICAgICAgKVxuXG4gICAgICAgIHRvZG9MaXN0LmdldFByb2plY3RzKCkuZm9yRWFjaCgocHJvamVjdCkgPT4gcHJvamVjdC5zZXRUYXNrcyhwcm9qZWN0LmdldFRhc2tzKCkubWFwKCh0YXNrKSA9PiBPYmplY3QuYXNzaWduKG5ldyBUYXNrKCksIHRhc2spKSkpXG5cbiAgICAgICAgcmV0dXJuIHRvZG9MaXN0XG4gICAgfVxuXG4gICAgYWRkUHJvamVjdChwcm9qZWN0KSB7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0ID0gdGhpcy5nZXRUb2RvTGlzdCgpXG4gICAgICAgIHRvZG9MaXN0LmFkZFByb2plY3QocHJvamVjdClcbiAgICAgICAgdGhpcy5zYXZlVG9kb0xpc3QodG9kb0xpc3QpXG4gICAgfVxuXG4gICAgZGVsZXRlUHJvamVjdChpbmRleCkge1xuICAgICAgICBjb25zdCB0b2RvTGlzdCA9IHRoaXMuZ2V0VG9kb0xpc3QoKVxuICAgICAgICB0b2RvTGlzdC5kZWxldGVQcm9qZWN0KGluZGV4KVxuICAgICAgICB0aGlzLnNhdmVUb2RvTGlzdCh0b2RvTGlzdClcbiAgICB9XG5cbiAgICBhZGRUYXNrKHByb2plY3ROYW1lLCBuYW1lLCBkYXRlKSB7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0ID0gdGhpcy5nZXRUb2RvTGlzdCgpXG4gICAgICAgIHRvZG9MaXN0LmdldFByb2plY3QocHJvamVjdE5hbWUpLmFkZFRhc2sobmFtZSwgZGF0ZSlcbiAgICAgICAgdGhpcy5zYXZlVG9kb0xpc3QodG9kb0xpc3QpXG4gICAgfVxuXG4gICAgZGVsZXRlVGFzayhwcm9qZWN0TmFtZSwgaW5kZXgpIHtcbiAgICAgICAgY29uc3QgdG9kb0xpc3QgPSB0aGlzLmdldFRvZG9MaXN0KClcbiAgICAgICAgdG9kb0xpc3QuZ2V0UHJvamVjdChwcm9qZWN0TmFtZSkuZGVsZXRlVGFzayhpbmRleClcbiAgICAgICAgdGhpcy5zYXZlVG9kb0xpc3QodG9kb0xpc3QpXG4gICAgfVxuXG4gICAgcmVuYW1lVGFzayhwcm9qZWN0TmFtZSwgdGFza0luZGV4LCBuZXdOYW1lKSB7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0ID0gdGhpcy5nZXRUb2RvTGlzdCgpO1xuICAgICAgICB0b2RvTGlzdC5nZXRQcm9qZWN0KHByb2plY3ROYW1lKS5nZXRUYXNrcygpW3Rhc2tJbmRleF0ubmFtZSA9IG5ld05hbWVcbiAgICAgICAgdGhpcy5zYXZlVG9kb0xpc3QodG9kb0xpc3QpXG4gICAgfVxuXG4gICAgc2V0VGFza0RhdGUocHJvamVjdE5hbWUsIHRhc2tJbmRleCwgbmV3RGF0ZSkge1xuICAgICAgICBjb25zdCB0b2RvTGlzdCA9IHRoaXMuZ2V0VG9kb0xpc3QoKTtcbiAgICAgICAgdG9kb0xpc3QuZ2V0UHJvamVjdChwcm9qZWN0TmFtZSkuZ2V0VGFza3MoKVt0YXNrSW5kZXhdLmR1ZURhdGUgPSBuZXdEYXRlXG4gICAgICAgIHRoaXMuc2F2ZVRvZG9MaXN0KHRvZG9MaXN0KVxuICAgIH1cblxuICAgIHNldEN1cnJlbnRQcm9qZWN0KGlkKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFByb2plY3QgPSBpZFxuICAgIH1cblxuICAgIGdldEN1cnJlbnRQcm9qZWN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50UHJvamVjdFxuICAgIH1cblxuICAgIHNldEN1cnJlbnRUYXNrKGluZGV4LCBpZCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRQcm9qZWN0ID0gaW5kZXhcbiAgICAgICAgdGhpcy5jdXJyZW50VGFzayA9IGlkXG4gICAgfVxuXG4gICAgcmVzZXRDdXJyZW50VGFzaygpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50VGFzayA9IE5PX1RBU0tfU0VMRUNURUQ7XG4gICAgfVxuXG4gICAgZ2V0Q3VycmVudFRhc2soKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRUYXNrXG4gICAgfVxufSIsImNvbnN0IE5PX1RBU0tfU0VMRUNURUQgPSAtMTtcbmNvbnN0IE5PX1BST0pFQ1RfU0VMRUNURUQgPSAtMTtcblxuZXhwb3J0IHtOT19UQVNLX1NFTEVDVEVELCBOT19QUk9KRUNUX1NFTEVDVEVEfSIsImltcG9ydCBTdG9yYWdlIGZyb20gXCIuL3N0b3JhZ2VcIjtcbmltcG9ydCBvbkxvYWQgZnJvbSBcIi4vZGVmYXVsdFwiO1xuXG5leHBvcnQgY29uc3QgVUkgPSAoKCkgPT4ge1xuICAgIC8vIFNFVCBVUCBORVcgU1RPUkFHRSBPQkpFQ1RcbiAgICBjb25zdCBzdG9yYWdlID0gbmV3IFN0b3JhZ2UoKTtcblxuICAgIC8vIEdFTkVSQVRFIERFRkFVTFQgRE9NIFxuICAgIG9uTG9hZChzdG9yYWdlLmdldFRvZG9MaXN0KCkuZ2V0UHJvamVjdChcIkluYm94XCIpLmdldE5hbWUoKSk7XG5cbiAgICAvLyBTRVQgQ1VSUkVOVCBQUk9KRUNUIFRPIERFRkFVTFQgXG4gICAgc3RvcmFnZS5zZXRDdXJyZW50UHJvamVjdCgwKTtcbiAgICBjb25zb2xlLmxvZyhzdG9yYWdlLmdldEN1cnJlbnRQcm9qZWN0KCkpO1xuXG4gICAgY29uc29sZS5sb2coc3RvcmFnZS5nZXRUb2RvTGlzdCgpLmdldFByb2plY3QoXCJJbmJveFwiKS5nZXRUYXNrcygpKTtcblxuICAgIC8vIFRBU0sgTElTVEVORVJTXG4gICAgY29uc3QgaW5pdFRhc2tCdXR0b25zID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBhZGRUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFzay1idG5cIik7XG4gICAgICAgIGNvbnN0IGNhbmNlbFRhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbmNlbC1idG5cIik7XG4gICAgICAgIGNvbnN0IHRhc2tGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrLWZvcm1cIik7XG5cbiAgICAgICAgYWRkVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgb3BlbkFkZFRhc2spO1xuICAgICAgICBjYW5jZWxUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZUFkZFRhc2spO1xuICAgICAgICB0YXNrRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBhZGRUb1Rhc2tzKCk7XG4gICAgICAgICAgICByZW5kZXJUYXNrcygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBvcGVuQWRkVGFzayA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgYWRkVGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhc2stYnRuXCIpO1xuICAgICAgICBjb25zdCBmb3JtRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLWRpdlwiKTtcbiAgICAgICAgY29uc3Qgc3VibWl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdWJtaXQtYnRuXCIpO1xuXG4gICAgICAgIGFkZFRhc2tCdG4uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICAgICAgZm9ybURpdi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgICAgICBzdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIkFkZFwiO1xuICAgIH1cblxuICAgIGNvbnN0IGNsb3NlQWRkVGFzayA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgYWRkVGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhc2stYnRuXCIpO1xuICAgICAgICBjb25zdCBmb3JtRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLWRpdlwiKTtcbiAgICAgICAgY29uc3QgdGFza0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stZm9ybVwiKTtcblxuICAgICAgICBhZGRUYXNrQnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgICAgIGZvcm1EaXYuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICAgICAgdGFza0Zvcm0ucmVzZXQoKTtcbiAgICB9XG5cbiAgICBjb25zdCBhZGRUb1Rhc2tzID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1uYW1lXCIpLnRleHRDb250ZW50O1xuICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpLnZhbHVlO1xuICAgICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkYXRlXCIpLnZhbHVlO1xuXG4gICAgICAgIHN0b3JhZ2UuYWRkVGFzayhwcm9qZWN0TmFtZSwgbmFtZSwgZGF0ZSk7XG4gICAgICAgIGNsb3NlQWRkVGFzaygpO1xuICAgIH1cblxuICAgIGluaXRUYXNrQnV0dG9ucygpO1xuXG4gICAgY29uc3QgcmVuZGVyVGFza3MgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LW5hbWVcIikudGV4dENvbnRlbnQ7XG4gICAgICAgIGNvbnN0IHRhc2tMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLWxpc3RcIik7XG4gICAgICAgIHRhc2tMaXN0LmlubmVySFRNTCA9IFwiXCI7XG5cbiAgICAgICAgc3RvcmFnZS5nZXRUb2RvTGlzdCgpLmdldFByb2plY3QocHJvamVjdE5hbWUpLmdldFRhc2tzKCkuZm9yRWFjaCgodGFzaywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIHRhc2tMaXN0LmlubmVySFRNTCArPSBgXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInRhc2tcIiBpZD0ke2luZGV4fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLWxpc3QtY2hlY2tcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0YXNrLW5hbWVcIj4ke3Rhc2submFtZX08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0YXNrLWRhdGVcIj4ke3Rhc2suZHVlRGF0ZX08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1wZW4tdG8tc3F1YXJlXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEtc29saWQgZmEteFwiPjwvaT5cbiAgICAgICAgICAgICAgICAgPC9idXR0b24+YFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHJlbmRlclRhc2tzKCk7XG5cbn0pKCk7IiwiaW1wb3J0IFN0b3JhZ2UgZnJvbSBcIi4vc3RvcmFnZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBvbkxvYWQobmFtZSkge1xuXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LXZpZXdcIik7XG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cInRvcFwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzPVwicHJvamVjdC1uYW1lXCI+JHtuYW1lfTwvaDE+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwidGFzay1saXN0XCI+PC9kaXY+XG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJhZGQtdGFzay1idG5cIj5cbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEtc29saWQgZmEtcGx1c1wiPjwvaT5cbiAgICAgICAgICAgIEFkZCBUYXNrXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1kaXZcIj5cbiAgICAgICAgICAgIDxmb3JtIGlkPVwidGFzay1mb3JtXCIgYWN0aW9uPVwiXCI+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIm5hbWVcIj5OYW1lPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cIm5hbWVcIiBuYW1lPVwidGFza05hbWVcIiByZXF1aXJlZD5cbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZGF0ZVwiPkR1ZSBEYXRlPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImRhdGVcIiBpZD1cImRhdGVcIiBuYW1lPVwiZHVlRGF0ZVwiIHJlcXVpcmVkPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWJ0bnNcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInN1Ym1pdC1idG5cIiB0eXBlPVwic3VibWl0XCI+QWRkPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJjYW5jZWwtYnRuXCIgdHlwZT1cImJ1dHRvblwiPkNhbmNlbDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcbn07Il0sIm5hbWVzIjpbIlRhc2siLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJkdWVEYXRlIiwidGhpcyIsInNldE5hbWUiLCJnZXROYW1lIiwic2V0RGF0ZSIsImdldERhdGUiLCJQcm9qZWN0IiwidGFza3MiLCJzZXRUYXNrcyIsImdldFRhc2tzIiwiZ2V0VGFzayIsInRhc2tOYW1lIiwiZmluZCIsInRhc2siLCJhZGRUYXNrIiwibmV3VGFzayIsImRhdGUiLCJwdXNoIiwiZGVsZXRlVGFzayIsImluZGV4Iiwic3BsaWNlIiwiVG9kb0xpc3QiLCJwcm9qZWN0cyIsInNldFByb2plY3RzIiwiZ2V0UHJvamVjdHMiLCJnZXRQcm9qZWN0IiwicHJvamVjdE5hbWUiLCJwcm9qZWN0IiwiYWRkUHJvamVjdCIsIm5ld1Byb2plY3QiLCJkZWxldGVQcm9qZWN0IiwiU3RvcmFnZSIsImN1cnJlbnRQcm9qZWN0IiwiY3VycmVudFRhc2siLCJzYXZlVG9kb0xpc3QiLCJkYXRhIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRUb2RvTGlzdCIsInRvZG9MaXN0IiwiT2JqZWN0IiwiYXNzaWduIiwicGFyc2UiLCJnZXRJdGVtIiwibWFwIiwiZm9yRWFjaCIsInJlbmFtZVRhc2siLCJ0YXNrSW5kZXgiLCJuZXdOYW1lIiwic2V0VGFza0RhdGUiLCJuZXdEYXRlIiwic2V0Q3VycmVudFByb2plY3QiLCJpZCIsImdldEN1cnJlbnRQcm9qZWN0Iiwic2V0Q3VycmVudFRhc2siLCJyZXNldEN1cnJlbnRUYXNrIiwiZ2V0Q3VycmVudFRhc2siLCJzdG9yYWdlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwiY29uc29sZSIsImxvZyIsIm9wZW5BZGRUYXNrIiwiYWRkVGFza0J0biIsImZvcm1EaXYiLCJzdWJtaXRCdG4iLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsImNsb3NlQWRkVGFzayIsInRhc2tGb3JtIiwicmVtb3ZlIiwicmVzZXQiLCJjYW5jZWxUYXNrQnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInZhbHVlIiwiYWRkVG9UYXNrcyIsInJlbmRlclRhc2tzIiwiaW5pdFRhc2tCdXR0b25zIiwidGFza0xpc3QiXSwic291cmNlUm9vdCI6IiJ9